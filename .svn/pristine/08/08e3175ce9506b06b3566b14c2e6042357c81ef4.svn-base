<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Index</title>
    <link href="style/bootstrap.min.css" rel="stylesheet" />
    <link href="style/animate.css" rel="stylesheet" />
     <script src="js/jquery.min.js"></script>
    <link href="style/GridLayout.css" rel="stylesheet"/>
    <script src="js/WdatePicker.js"  type="text/javascript"></script>
<script src="js/MyGrid.js"  type="text/javascript"></script>
 <link href="style/MyGrid.css" type="text/css" rel="stylesheet"/>
    <script type="text/javascript">
        function NewRefresh() {
            var pp = { "querymc": $("#QueryMC").val(), "StartDate": $("#startDate").val(), "EndDate": $("#endDate").val() };
            GRID_GasAlarmLog.LoadData(pp);
        }
        //导出Excel
        function ExportClick(Grid) {
            Grid.ExportData();
        }
        function StatusFun(s) {
            if  (s == "02") {
                return "浓度报警";
            } else if (s == "03") {
                return "设备过期";
            }
        }
    </script>
    <link href="style/MDStyle.css" rel="stylesheet" />
</head>
<body>
<div class="onlyGrid1">
    <div class="btn-group btn-group-sm" role="group">
        <button type="button" aria-expanded="false" onclick="ExportClick(GRID_ElecAlarmLog);" class="btn btn-success" style="margin-top: 5px;margin-left: 10px;">
            <span class="glyphicon glyphicon-share" aria-hidden="true"></span>导出
        </button>
    </div>
    <div class="Toolbar_SearchBox" style="width:700px;">
        <div class="input-group">
            <span class="input-group-addon">关键字</span>
            <input class="form-control " id="QueryMC" name="QueryMC" style="width:150px;" type="text" value="" />
            <span class="input-group-addon" style="border-left:none;border-right:none;">时间</span>
            <input class="form-control Wdate  " id="startDate" name="startDate" onfocus="WdatePicker({dateFmt:&#39;yyyy-MM-dd HH:mm:ss&#39;});" type="text" value="2018-08-03 00:00:00" />
            <span class="input-group-addon" style="border-left:none;border-right:none;">到</span>
            <input class="form-control Wdate  " id="endDate" name="endDate" onfocus="WdatePicker({dateFmt:&#39;yyyy-MM-dd HH:mm:ss&#39;});" type="text" value="2018-08-03 18:52:41" />
            <span class="input-group-btn">
                <button class="btn btn-primary" type="button" onclick="NewRefresh()">查询</button>
            </span>
        </div>
    </div>
    <script type="text/javascript">
 var GRID_GasAlarmLog =new aguoGrid({ 
 ID: "GRID_GasAlarmLog",
 fill: true,
 style: "",
 defaultLoad: true,
 serviceUrl:" /SGasAlarm/AlarmGridSource",
 dbClick: null,
 loadBack: null,
 editHeight: "0",
 editUrl: "",
 editWidth: "0",
 editHeight: "0",
 editTitle: "",
 cols:[
{ colName: 'ID', colHead: '主键', colWidth: '200',colAlign:'left' ,colVisible:false,colRender:null,renderCode:''},{ colName: 'ComName', colHead: '所属单位', colWidth: '250',colAlign:'left' ,colVisible:true,colRender:null,renderCode:''},{ colName: 'DevBH', colHead: '设备编号', colWidth: '100',colAlign:'center' ,colVisible:true,colRender:null,renderCode:''},{ colName: 'DevMC', colHead: '安装位置', colWidth: '200',colAlign:'left' ,colVisible:true,colRender:null,renderCode:''},{ colName: 'AlarmType', colHead: '报警类型', colWidth: '150',colAlign:'center' ,colVisible:true,colRender:StatusFun,renderCode:''},{ colName: 'AlarmTime', colHead: '报警时间', colWidth: '200',colAlign:'center' ,colVisible:true,colRender:null,renderCode:''},{ colName: 'AlarmValue', colHead: '报警值', colWidth: '150',colAlign:'center' ,colVisible:true,colRender:null,renderCode:''} ],
defaultParam:{SelectField: "ID,ComName,DevBH,DevMC,AlarmType,AlarmTime,AlarmValue",MenuCode:"GasAlarmLog",PolicyCode:""},
renderData:{}
 });
GRID_GasAlarmLog.render();
</script>
</div>
     <script src="js/bootstrap.min.js"></script>
</body>
</html>