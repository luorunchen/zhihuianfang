<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>电力系统检测</title>
  <link href="style/bootstrap.min.css" rel="stylesheet" />
  <link href="style/animate.css" rel="stylesheet" />
  <script src="js/ezuikit.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/url_zhuan.js"></script>
  <script type="text/javascript" src="js/default.js"></script>
  <script src="http://api.map.baidu.com/api?v=2.0&ak=gQ5brR6pk0kIpWhZsGRhmU2T"></script>
  <script src="BDMapElePow/mapUtil.js"></script>
  <script src="BDMapElePow/mapv.js"></script>
  <script src="BDMapElePow/BDMap.js"></script>
  <script src="BDMapElePow/mapData.js"></script>
  <script src="BDMapElePow/mapTool.js"></script>
  <script src="BDMapElePow/MyFocus.js"></script>
  <script src="js/highcharts.js"></script>
  <link href="style/MapElec.css" rel="stylesheet" />
  <link href="style/ElecSumPage.css" rel="stylesheet" />
  <link href="style/MDStyle.css" rel="stylesheet" />
  <link href="style/xtbny.css" rel="stylesheet" />
  <link rel="stylesheet" href="style/1.css">
  <link rel="stylesheet" href="style/weui.css">
  <link rel="stylesheet" href="style/jquery-weui.css">

</head>

<body>
  <audio src="./music/6709.mp3" id="auto"></audio>
  <div class="bodyBox">
    <div class="MapBox">
    </div>
    <div class="HeadBox">
      <div class="webTitle">电力系统检测</div>
      <div class="navBack">
        <div class="backImg" onclick="window.top.goMain();"></div>
        <div class="backTitle">返回首页</div>
      </div>
    </div>
    <div class="NavMenuBox">
      <div class="LeftNavBox" style="width:1300px; position: absolute;top: 80px;left:47%;margin-left:-600px;">

        <div class="MenuRow">
          <!--<div class="MenuItem" onclick="ShowFull({bh:'AA88', id:'BDQuestion', title:'隐患整改进度', url:'1.html'})">
            <div class="MenuItem1" style="background-color:#92236b;">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 隐患整改进度 </div>
            </div>
          </div>-->
          <div class="MenuItem" onclick="ShowFull({bh:'AC91', id:'PubDevice2', title:'电气火灾隐患预警分析1', url:'2.html'})">
            <div class="MenuItem1" style="background-color:#69aa4c">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 电气火灾隐患预警分析 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowFull({bh:'AC92', id:'PubDevice3', title:'消防水系统预警分析', url:'3.html'})">
            <div class="MenuItem1" style="background-color:#b65066">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 消防水系统预警分析 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowFull({bh:'AC93', id:'PubDevice1', title:'火灾报警系统数据分析', url:'4.html'})">
            <div class="MenuItem1" style="background-color:#0197e4">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 火灾报警系统数据分析 </div>
            </div>
          </div>


          <div class="MenuItem" onclick="ShowFull({bh:'AC94', id:'PubDevice6', title:'重点部位预警分析', url:'5.html'})">
            <div class="MenuItem1" style="background-color:#2f2db7">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 重点部位预警分析 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowFull({bh:'ACAC', id:'PubDevice9', title:'智慧型独立烟感预警分析', url:'6.html'})">
            <div class="MenuItem1" style="background-color:#e3b720">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 智慧型独立烟感预警分析 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowFull({bh:'ACAE', id:'SGasAlarm', title:'燃气探测器报警分析', url:'7.html'})">
            <div class="MenuItem1" style="background-color:#de6c0f">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 燃气探测器报警分析 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowFull({bh:'ACAE', id:'ElePowerDetaction', title:'电力系统检测', url:'12.html'})">
            <div class="MenuItem1 MenuItem2" style="background-color:#de6c0f">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 电力系统检测 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowModel({bh:'ACEm', id:'Emergency', title:'应急处理', url:'8.html'})">
            <div class="MenuItem1 " style="background-color:#F20000">
              <div class="MenuContent">
                <div class="MenuPic" style="background-image:url(images/firepart_1.png)"></div>
              </div>
              <div class="MenuTitle"> 应急处理 </div>
            </div>
          </div>
          <div class="MenuItem" onclick="ShowFull({bh:'ACBJ', id:'BaojingFac', title:'智慧型消防报警', url:'13.html'})">
            <div class="MenuItem1 " style="background-color:#20dae3">
              <div class="MenuContent">
                <div class="MenuPic" style="background-image:url(images/baojing.png)"></div>
              </div>
              <div class="MenuTitle"> 智慧型消防报警 </div>
            </div>
          </div>
          <!-- <div class="MenuItem" onclick="ShowFull({bh:'ACQQ', id:'Miehuo', title:'灭火器', url:'10.html'})">
            <div class="MenuItem1" style="background-color:#f33ea4;">
              <div class="MenuContent">
                <div class="MenuPic"></div>
              </div>
              <div class="MenuTitle"> 灭火器 </div>
            </div>
          </div> -->
        </div>
        <div id="clear"></div>

      </div>
    </div>
    <div class="leftBox">
      <div class="numBox" id="ElecAlarmSum">
        <!--<div class="numTitle">今日报警</div>
            <div class="numContent" id="Alarm00">
                <div class="numCell">0</div>
                <div class="numCell">0</div>
                <div class="numCell">0</div>
                <div class="numCell">0</div>
                <div class="numCell">0</div>
                <div class="numCell">0</div>
            </div>
            <div class="numItem bg1" data-sign="01" >
                电压报警<div id="Alarm01" class="valueCell"></div>
            </div>
            <div class="numItem bg2"  data-sign="02" >
                电流报警<div id="Alarm02" class="valueCell"></div>
            </div>
            <div class="numItem bg3"  data-sign="03" >
                剩余电流报警<div id="Alarm03" class="valueCell"></div>
            </div>
            <div class="numItem bg4" data-sign="04">
                温度报警<div id="Alarm04" class="valueCell"></div>
            </div>-->

      </div>
      <div class="numBox" id="ElecDeviceSum" style="margin-top:10px;">
        <div class="numTitle">接入电力火灾探测器</div>
        <div class="numContent" id="Dev00">
          <div class="numCell">0</div>
          <div class="numCell">0</div>
          <div class="numCell">0</div>
          <div class="numCell">0</div>
          <div class="numCell">0</div>
          <div class="numCell">0</div>
        </div>
        <div class="numItem bg5" data-sign="01">
          报警<div id="Dev01" class="valueCell"></div>
        </div>
        <div class="numItem bg6" data-sign="02">
          在线<div id="Dev02" class="valueCell"></div>
        </div>
        <div class="numItem bg7" data-sign="03">
          离线<div id="Dev03" class="valueCell"></div>
        </div>
      </div>
    </div>
    <div class="queryBox">
      <div class="queryToolBar">
        <input type="text" class="form-control queryText" />
        <button class="btn btn-primary queryBut">查询</button>
      </div>
      <div class="queryResult">
      </div>
    </div>
    <div class="chartBox">
      <div class="chartBody">
      </div>
      <div class="chartLabel">隐患趋势图</div>
      <div class="chartBut"><i class="glyphicon glyphicon-circle-arrow-right"></i></div>
    </div>
  </div>
  <div id="boxYing" style='    display: none;'>
    <div id="playWind"></div>
  </div>
  <script type="text/javascript" src="https://cdn.goeasy.io/goeasy.js"></script>
  <script type="text/javascript" src="https://cdn.goeasy.io/goeasy-1.2.1.js"></script>
  <script src="js/jquery-weui.js"></script>

  <script>
    var username = localStorage.getItem('userName');
    console.log(username)
    if (username == "" || username == null) {
      alert('请登录后进入主页')
      location.href = "login.html"
    }
  </script>
  <script type="text/javascript">
    //获取音频对象
    var audio = $("#auto")[0];
    audio.addEventListener("ended", function () {
      if (playNum > 0) {
        playNum--;
        audio.play();
      }
    }, false);

    var playAlarm = function () {
      playNum = 3;
      audio.play();
    };

    var userName = parseInt(localStorage.getItem('userName'));


    var goEasy = GoEasy.getInstance({
      host: 'hangzhou.goeasy.io',
      appkey: goKey
    });

    goEasy.connect({
      onSuccess: function () {  //连接成功
        console.log("GoEasy connect successfully.") //连接成功
      },
      onFailed: function (error) { //连接失败
        console.log("Failed to connect GoEasy, code:" + error.code + ",error:" + error.content);
      },
      onProgress: function (attempts) { //连接或自动重连中
        console.log("GoEasy is connecting", attempts);
      }
    });


    function goEasyTime() {
      goEasy.subscribe({
        channel: userName.toString(),
        onMessage: function (message) { //这边是推送网页之后，页面的动作
          console.log(message);
          var res = message.content;

          function addJs(filepath, callback) {
            console.log(filepath)
            var oJs = document.createElement("script");
            oJs.setAttribute("src", filepath);
            oJs.onload = callback;
            document.getElementsByTagName("head")[0].appendChild(oJs);
          }
          var arr = res.split(',');
          console.log(arr)
          console.log(arr[0])
          //http://192.168.0.156:8080/earlyWarn/getvideoBydevno.action?devno=
          var str = []
          $.ajax({
            type: 'get',
            url: url + '/getvideoBydevno.action',
            data: 'devno=' + arr[0],
            // data: 'devno=' + '0460046912308548',
            error: function (XMLHttpRequest, textStatus, errorThrown) {
              console.log(XMLHttpRequest)
              console.log(textStatus)
              console.log(errorThrown)
            },
            success: function (res) {
              console.log(res)
              var data = res.mess;
              var accessToken = res.accessToken
              if (data == '0') {
                console.log('暂无摄像')
              } else {
                $('#loading-item-0').css('display', 'none');
                var str = []
                $.each(data, function (i, v) {
                  console.log(i, v)
                  if (v.indexOf('_') != -1) {
                    console.log(v)
                    str.push(v)
                  }
                })
                console.log(str)
                var yanNum = str[0].split('_')[1]
                var devNum = str[0].split('_')[0]
                var ezuikitTalkData = {
                  accessToken: res.accessToken, // 应用accessToken
                  ezopen: "ezopen://" + yanNum + "@open.ys7.com/" + devNum +
                    "/1.hd.live", // 包含设备信息的ezopen协议
                  // decoderPath: './' // 当前页面与插件主文件ezuiit-talk相对路径
                  decoderPath: '../lingdong' // 当前页面与插件主文件ezuiit-talk相对路径  //线上模式
                };
                console.log(ezuikitTalkData)
                // var ezuikitPath = ezuikitTalkData.decoderPath + '/ezuikit.js';
                var ezuikitPath = ezuikitTalkData.decoderPath + '/js/ezuikit.js'; //线上模式
                console.log(ezuikitPath)
                var startSave = false;
                var playing = false;
                var decoder;
                var url = ezuikitTalkData.ezopen;
                var accessToken = ezuikitTalkData.accessToken;
                addJs(ezuikitPath, function () {
                  var autoplay = 1;
                  var audioId = 0;
                  var templete = 2;
                  var deviceSerial = url.split('/')[3];
                  var channelNo = url.split('/')[4].split('.')[0];
                  if (autoplay == '1') {
                    init();
                  }
                  var width = document.documentElement.clientWidth || sessionStorage.getItem('width');
                  var height = document.documentElement.clientHeight || sessionStorage.getItem(
                    'height');
                  $("#playWind").height(height - (48 * 2));

                  function init() {
                    try {
                      decoder && decoder.stop();
                    } catch (e) {
                      console.log("E", e);
                    }
                    $("#video-hd").text(url.indexOf('hd') === -1 ? '标清' : '高清')
                    setTimeout(() => {
                      decoder = new EZUIKit.EZUIPlayer({
                        id: "playWind",
                        autoplay: true,
                        audioId: audioId,
                        url: url,
                        accessToken: ezuikitTalkData.accessToken,
                        decoderPath: ezuikitTalkData.decoderPath,
                        width: width,
                        height: height - (48 * 2),
                      });
                    }, 100);
                  }

                  function initStar() {
                    var startSavePromise = decoder.startSave(0, (new Date() + 'video'));
                    startSavePromise.then(function (data) {
                      console.log("start save success", startSavePromise);
                      $("#startSave").hide();
                      $("#stopSave").show();
                    })
                      .catch(function (error) {
                        console.log("start Save error", error)
                      })
                  }

                  function endStart() {
                    console.log('结束录像')
                    var stopSavePromise = decoder.stopSave(0);
                    stopSavePromise.then(function (data) {
                      console.log("stop save success", stopSavePromise)
                      $("#stopSave").hide();
                      $("#startSave").show();
                    })
                      .catch(function (error) {
                        console.log("stop Save error", error)
                      })
                  }
                  setTimeout(() => {
                    initStar()
                  }, 2000);
                  setTimeout(() => {
                    endStart()
                    stop()
                  }, 20000);

                  function stop() {
                    var stopPromise = decoder.stop();
                    stopPromise.then(function () {
                      console.log("关闭成功，用户执行关闭成功后的操作");
                    })

                  }
                })

              }
              if (arr != "") {
                playAlarm();
                sessionStorage.setItem('devId', arr[1]); //devId 
                sessionStorage.setItem('devMC', arr[2]); //v.installLocation
                sessionStorage.setItem('productNumber', arr[0]);
                sessionStorage.setItem('DevBH', arr[1]); //devId 
                if (arr[5] == '0') { //网关
                  localStorage.setItem('tpage', '4')
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/wanguan.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      //./ExtApp_SFASAlarm_SFASDetail.html?devBH=25523
                      window.top.OpenThirdFrame("./ExtApp_SFASAlarm_SFASDetail.html?devId=" +
                        arr[1], 800, 600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '2') { //烟感
                  localStorage.setItem('tpage', '6')
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/ygalarm.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame("./SSmoke_SmokeDetail.html?devId=" + arr[1],
                        800, 600, "win",
                        arr[2]);
                    }
                  });
                } else if (arr[5] == '3') { //电气
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/alarm2.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame("./ExtApp_SElectric_ElecDetail.html?devBH=" +
                        arr[1] +
                        '&devSignature=' +
                        arr[0], 1100, 600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '4') { //水压
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/alarm_hong.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame("./ExtApp_Water_WaterDetail.html?devBH=" +
                        arr[1], 800, 600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '5') { //消防主机
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/zhuji_red.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      localStorage.setItem('tpage', '4')
                      window.top.OpenThirdFrame("./ExtApp_SFASAlarm_SFASDetail.html?devBH=" +
                        arr[1], 600, 600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '6' || arr[5] == '1') { //无线气感
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/Gasalarm.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      localStorage.setItem('tpage', '7')
                      window.top.OpenThirdFrame("./SGasAlarm_GasAlarm.html?devId=" + arr[1] +
                        '&dSid=' + arr[5],
                        800, 600, "win",
                        '历史报警');
                    }
                  });
                } else if (arr[5] == '8') { //无线液位
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/gwsxAlarm.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./ExtApp_Water_WaterDetailwatch.html?devBH=" + arr[1], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '10') { // 消防门磁 
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/fire_door.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./SSmoke_SmokeDetail.html?devId=" + arr[1], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '11') { // 工业报警
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/gong_hong.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./SGasAlarm_GasAlarm.html?devId=" + arr[1] + '&dSid=' + arr[5], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '12') { // 电力火灾探测器 
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/ElePowPRO.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./ElecPower_SElectric_ElecDetail.html?devBH=" + arr[1], 1100,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '15') { // 声光报警器 
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/shengguang.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./SSmoke_SmokeDetail.html?devBH=" + arr[1], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '16') { // 手动报警 
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/shoudong.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./SSmoke_SmokeDetail.html?devBH=" + arr[1], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '18') { // 水浸报警器 
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/shuiyin.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./SSmoke_SmokeDetail.html?devBH=" + arr[1], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                } else if (arr[5] == '19') { // 紧急报警 
                  $.noti({
                    title: '报警类型:' + arr[4],
                    text: "<p>设备号:" + arr[0] + "</p><p>设备ID:" + arr[1] + "</p><p>设备地址:" + arr[
                      2] +
                      "</p><p>项目名称:" +
                      arr[3] +
                      "</p><p><img src='./images/video_sm.png' style='width:20px;height:20px;'><a href='javascript:;' class='yingshi' style='color: #fff;'>查看视频</a></p>",
                    media: "<img src='./images/jinji.png'>",
                    data: {
                      message: message
                    },
                    time: 30000000,
                    onClick: function (data) {
                      console.log(data);
                      window.top.OpenThirdFrame(
                        "./SSmoke_SmokeDetail.html?devBH=" + arr[1], 800,
                        600,
                        "win", arr[2]);
                    }
                  });
                }
              }

              $('.yingshi').click(function (e) {
                e.preventDefault();
                if (res.mess != '0') {
                  window.top.OpenYingFrame("./ExtApp_SVideo_yingDetail.html?devNum=" + devNum +
                    "&yanNum=" + yanNum + "&accessToken=" + accessToken, 1100, 700, "win", "视频");
                } else {
                  alert('该设备的项目中没有摄像设备')
                }

              })
            }
          })

          console.log(message.content);

        }
      });
    }

    setTimeout(function () {
      goEasyTime();
    }, 5000)
  </script>
  <script src="js/bootstrap.min.js"></script>


</body>

</html>